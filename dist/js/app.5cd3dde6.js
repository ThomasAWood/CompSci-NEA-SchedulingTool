(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"161f":function(e,t,r){"use strict";var n=r("1d809"),a=r.n(n);a.a},"1d809":function(e,t,r){},4646:function(e,t,r){},5694:function(e,t,r){"use strict";var n=r("8662"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("8c4f"),s=r("5f5b"),o=r("b1e0"),i=(r("f9e3"),r("2dd8"),r("a434"),r("96cf"),r("1da1")),c=r("2f62"),l=r("bc3a"),u=r.n(l),d=function(){return u.a.create({baseURL:"http://localhost:8080/api",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}})};n["default"].use(c["a"]);var p=new c["a"].Store({state:{users:[],currentUser:{},teachersLessons:[],teachers:[],bookings:[],students:[]},mutations:{SET_USERS:function(e,t){e.users=t},LOGOUT_USER:function(e){e.currentUser={},window.localStorage.currentUser=JSON.stringify({})},SET_CURRENT_USER:function(e,t){e.currentUser=t,window.localStorage.currentUser=JSON.stringify(t)},SET_TEACHERS_LESSONS:function(e,t){e.teachersLessons=t},SET_TEACHERS:function(e,t){e.teachers=t},CLEAR_TEACHERS:function(e){e.teachers=[]},ADD_BOOKING:function(e,t){e.bookings.append(t)},SET_BOOKINGS:function(e,t){e.bookings=t},SET_STUDENTS:function(e,t){e.students=t},CLEAR_STUDENTS:function(e){e.students=[]}},actions:{loadUsers:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,d().get("/users");case 3:n=t.sent,a=n.data,r("SET_USERS",a),s=JSON.parse(window.localStorage.currentUser),r("SET_CURRENT_USER",s);case 8:case"end":return t.stop()}}),t)})))()},logoutUser:function(e){var t=e.commit;t("LOGOUT_USER")},loadTeachersLessons:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().post("/search/teachers/lessons",t);case 4:return a=r.sent,s=a.data.lessonInstances,r.next=8,d().get("/teachers/bookings/".concat(t.userId));case 8:for(o=r.sent,i=o.data,console.log("lessonLength",s.length),c=0;c<s.length;c++)for(console.log("Lesson1",c),l=0;l<i.length;l++)console.log("Booking1",l),i[l].lessonId==s[c].id&&s[c].start==i[l].start&&(console.log("Booking lesson overlap triggered"),s.splice(c,1));n("SET_TEACHERS_LESSONS",s),r.next=18;break;case 15:return r.prev=15,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error when loading teachers lessons"});case 18:case"end":return r.stop()}}),r,null,[[1,15]])})))()},loginUser:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().post("/users/sessions",t);case 4:if(a=r.sent,s=a.data,!s.error){r.next=8;break}return r.abrupt("return",s.error);case 8:return n("SET_CURRENT_USER",s),r.abrupt("return",s);case 12:return r.prev=12,r.t0=r["catch"](1),r.abrupt("return",{error:"Username/Password was incorrect. Please try again"});case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},registerUser:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().post("/users",t);case 4:if(a=r.sent,s=a.data,!s.error){r.next=8;break}return r.abrupt("return",s.error);case 8:return n("SET_CURRENT_USER",s),r.abrupt("return",s);case 12:return r.prev=12,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error. Please try registering again"});case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},createLesson:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().post("/lessons",t);case 4:if(a=r.sent,s=a.data,!s.error){r.next=8;break}return r.abrupt("return",s.error);case 8:return n("SET_TEACHERS_LESSONS",s),r.abrupt("return",s);case 12:return r.prev=12,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error while creating the lesson"});case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},searchForTeachers:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,console.log("searchInput:",t),r.next=5,d().post("/teachers/search",t);case 5:if(a=r.sent,console.log(a),s=a.data,!s.error){r.next=10;break}return r.abrupt("return",s.error);case 10:return n("SET_TEACHERS",s),r.abrupt("return",s);case 14:return r.prev=14,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error while searching the teachers"});case 17:case"end":return r.stop()}}),r,null,[[1,14]])})))()},searchForStudents:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,console.log("searchInput:",t),r.next=5,d().post("/students/search",t);case 5:if(a=r.sent,console.log(a),s=a.data,!s.error){r.next=10;break}return r.abrupt("return",s.error);case 10:return n("SET_STUDENTS",s),r.abrupt("return",s);case 14:return r.prev=14,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error while searching for that student"});case 17:case"end":return r.stop()}}),r,null,[[1,14]])})))()},createBooking:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,console.log(t),r.next=5,d().post("/bookings",t);case 5:if(a=r.sent,console.log("Create Booking Store response",a),s=a.data,!s.error){r.next=10;break}return r.abrupt("return",s.error);case 10:return n("ADD_BOOKING",s),r.abrupt("return",s);case 14:return r.prev=14,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error while creating the booking"});case 17:case"end":return r.stop()}}),r,null,[[1,14]])})))()},loadTeachersBookings:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().get("/teachers/bookings/".concat(t));case 4:a=r.sent,s=a.data,o=0;case 7:if(!(o<s.length)){r.next=22;break}return r.prev=8,r.next=11,d().get("/users/".concat(s[o].studentId));case 11:i=r.sent,c=i.data,s[o].title=c.fname+" "+c.lname,r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](8),s[o].title="Name Error";case 19:o++,r.next=7;break;case 22:if(!s.error){r.next=24;break}return r.abrupt("return",s.error);case 24:return n("SET_BOOKINGS",s),r.abrupt("return");case 28:return r.prev=28,r.t1=r["catch"](1),r.abrupt("return",{error:"There was an error while getting the teachers bookings"});case 31:case"end":return r.stop()}}),r,null,[[1,28],[8,16]])})))()},loadStudentsBookings:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().get("/students/bookings/".concat(t));case 4:if(a=r.sent,s=a.data,!s.error){r.next=8;break}return r.abrupt("return",s.error);case 8:o=0;case 9:if(!(o<s.length)){r.next=24;break}return r.prev=10,r.next=13,d().get("/users/".concat(s[o].teacherId));case 13:i=r.sent,c=i.data,s[o].title=c.fname+" "+c.lname,r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](10),s[o].title="Name Error";case 21:o++,r.next=9;break;case 24:return n("SET_BOOKINGS",s),r.abrupt("return");case 28:return r.prev=28,r.t1=r["catch"](1),r.abrupt("return",{error:"There was an error while getting the students bookings"});case 31:case"end":return r.stop()}}),r,null,[[1,28],[10,18]])})))()},cancelBooking:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().post("/bookings/cancel/".concat(t));case 4:if(a=r.sent,s=a.data,!s.error){r.next=10;break}return r.abrupt("return",s.error);case 10:return n("SET_BOOKINGS",[]),r.abrupt("return",s);case 12:r.next=17;break;case 14:return r.prev=14,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error while cancelling the booking. Please try again"});case 17:case"end":return r.stop()}}),r,null,[[1,14]])})))()},deleteLesson:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,d().delete("/lessons/".concat(t));case 4:if(a=r.sent,s=a.data,console.log("Deletion",s),!s.error){r.next=11;break}return r.abrupt("return",s.error);case 11:return n("SET_TEACHERS_LESSONS",[]),r.abrupt("return",s);case 13:r.next=18;break;case 15:return r.prev=15,r.t0=r["catch"](1),r.abrupt("return",{error:"There was an error while deleting the lesson."});case 18:case"end":return r.stop()}}),r,null,[[1,15]])})))()}}}),m=r("fa33"),f=r("97fc"),g=r.n(f),h=(r("1e11"),r("1881")),v=r.n(h),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Header"),r("router-view",{attrs:{id:"body"}})],1)},I=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currentUser.fname&&!e.currentUser.isTeacher?r("b-navbar",{attrs:{toggleable:"lg",variant:"primary",type:"dark",id:"navbar"}},[r("b-navbar-brand",[e._v("Music Lessons")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("b-nav-item",{on:{click:e.homepageRedirect}},[e._v("Home")]),r("b-nav-item",{on:{click:e.redirectBookingPage}},[e._v("Book Lessons")])],1),r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-text",[r("span",{attrs:{id:"name"}},[e._v(e._s(e.currentUser.fname))])]),r("b-nav-item",{on:{click:e.logoutUser}},[r("b-button",{attrs:{size:"sm",variant:"danger"}},[e._v("Logout")])],1)],1)],1)],1):e.currentUser.fname&&e.currentUser.isTeacher?r("b-navbar",{attrs:{toggleable:"lg",variant:"primary",type:"dark",id:"navbar"}},[r("b-navbar-brand",[e._v("Music Lessons")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("b-nav-item",{on:{click:e.homepageRedirect}},[e._v("Home")]),r("b-nav-item",{on:{click:e.studentsRedirect}},[e._v("Students")]),r("b-nav-item",{on:{click:e.invoiceRedirect}},[e._v("Invoicing")])],1),r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-text",[r("span",{attrs:{id:"name"}},[e._v(e._s(e.currentUser.fname))])]),r("b-nav-item",{on:{click:e.logoutUser}},[r("b-button",{attrs:{size:"sm",variant:"danger"}},[e._v("Logout")])],1)],1)],1)],1):r("b-navbar",{attrs:{toggleable:"lg",variant:"primary",type:"dark",id:"navbar"}},[r("b-navbar-brand",[e._v("Music Lessons")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("b-nav-item",{on:{click:e.loginRedirect}},[e._v("Login")]),r("b-nav-item",{on:{click:e.registerRedirect}},[e._v("Register")])],1)],1)],1)},k=[],_=r("5530"),x={name:"Header",computed:Object(_["a"])({},Object(c["b"])(["currentUser"])),methods:{logoutUser:function(){this.$store.dispatch("logoutUser"),this.$router.push({name:"landingPage"})},loginRedirect:function(){this.$router.push({name:"loginForm"})},registerRedirect:function(){this.$router.push({name:"registerForm"})},homepageRedirect:function(){this.$router.push({name:"homepage"})},studentsRedirect:function(){this.$router.push({name:"studentSearch"})},redirectBookingPage:function(){this.$router.push({name:"bookingPage"})},invoiceRedirect:function(){this.$router.push({name:"invoicing"})}}},S=x,C=(r("d1d4"),r("2877")),y=Object(C["a"])(S,w,k,!1,null,"0b1792c9",null),T=y.exports,E={name:"App",components:{Header:T}},O=E,R=(r("034f"),Object(C["a"])(O,b,I,!1,null,null,null)),L=R.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[0===e.currentUser.isTeacher?r("div",[r("student-homepage")],1):r("div",[r("teacher-homepage")],1)])},P=[],j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{fluid:""}},[r("b-button",{staticClass:"float-right",attrs:{variant:"primary",right:""},on:{click:e.showCreateLessonForm}},[e._v("Create New Lesson Slot")])],1)],1),r("b-row",{staticClass:"mt-2",attrs:{id:"calendarContainer"}},[r("b-col",[r("full-calendar",{ref:"calendar",attrs:{options:e.calendarOptions},on:{refreshCalendar:e.fetchLessons}})],1)],1),r("modal",{attrs:{name:"createLessonFormModal",width:300,height:640}},[r("div",{staticClass:"text-center"},[r("create-lesson"),r("button",{staticClass:"btn btn-outline-danger mt-5",on:{click:e.hideCreateLessonForm}},[e._v("Close")])],1)]),r("modal",{attrs:{name:"bookingInfoModal",width:500,height:400}},[r("div",{staticClass:"text-center"},[r("div",[e.bookingModalInfo.cancelled?r("h1",[e._v("Cancelled Booking")]):r("h1",[e._v("Booking")]),r("p",[e._v(e._s(e.bookingModalInfo.startTime)+" - "+e._s(e.bookingModalInfo.endTime))]),r("p",[e._v("Student: "+e._s(e.bookingModalInfo.studentName))])]),e.bookingModalInfo.cancelled?r("div",[r("b-button",{attrs:{variant:"danger",disabled:""},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1):r("div",[r("b-button",{attrs:{variant:"danger"},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1),r("b-button",{attrs:{variant:"danger"},on:{click:e.deleteLessonSlotFromBooking}},[e._v("Delete Lesson Slot")]),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.hideBookingInfo}},[e._v("Close")])],1)]),r("modal",{attrs:{name:"lessonInfoModal",width:500,height:400}},[r("div",{staticClass:"text-center"},[r("div",[r("h1",[e._v("Lesson Slot")]),r("p",[e._v(e._s(e.lessonModalInfo.startTime)+" - "+e._s(e.lessonModalInfo.endTime))])]),r("div",[r("button",{staticClass:"btn btn-danger",on:{click:e.deleteLessonSlot}},[e._v("Delete Lesson Slot")])]),r("button",{staticClass:"btn btn-outline-danger",on:{click:e.hideLessonInfo}},[e._v("Close")])])])],1)},D=[],U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("div",[r("h3",{staticClass:"my-3"},[e._v("Create New Lesson Slot")]),r("div",{staticClass:"my-4"},[r("span",{staticClass:"mb-2"},[e._v("Date and Time")]),r("Datepicker",{attrs:{"bootstrap-styling":!0,inline:!1,placeholder:"Date","disabled-dates":e.disabledDates},model:{value:e.startDateInput,callback:function(t){e.startDateInput=t},expression:"startDateInput"}}),r("Timepicker",{attrs:{name:"StartTimePicker"},model:{value:e.startTimeInput,callback:function(t){e.startTimeInput=t},expression:"startTimeInput"}})],1),r("div",{staticClass:"mt-4"},[r("label",{staticClass:"mx-2",attrs:{for:"DurationPicker"}},[e._v("Lesson Duration")]),r("Timepicker",{attrs:{name:"StartTimePicker",format:"mm","hour-range":[],"hide-disabled-hours":""},model:{value:e.durationInput,callback:function(t){e.durationInput=t},expression:"durationInput"}})],1),r("div",{staticClass:"mt-4"},[r("label",{staticClass:"mx-2",attrs:{for:"Repeat"}},[e._v("Repeat Weekly?")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.lessonInfo.isRecurring,expression:"lessonInfo.isRecurring"}],staticClass:"mx-2",attrs:{type:"checkbox",name:"Repeat"},domProps:{checked:Array.isArray(e.lessonInfo.isRecurring)?e._i(e.lessonInfo.isRecurring,null)>-1:e.lessonInfo.isRecurring},on:{change:function(t){var r=e.lessonInfo.isRecurring,n=t.target,a=!!n.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);n.checked?o<0&&e.$set(e.lessonInfo,"isRecurring",r.concat([s])):o>-1&&e.$set(e.lessonInfo,"isRecurring",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.lessonInfo,"isRecurring",a)}}})]),e.lessonInfo.isRecurring?r("div",[r("Datepicker",{attrs:{name:"repeatUntilDate","bootstrap-styling":!0,inline:!1,placeholder:"Repeat Weekly Until...","disabled-dates":e.disabledDates},model:{value:e.endDateInput,callback:function(t){e.endDateInput=t},expression:"endDateInput"}}),r("span",{staticClass:"userNotice"},[e._v("(Leave blank for repeat forever)")])],1):e._e(),r("button",{staticClass:"btn btn-outline-success my-3",on:{click:e.createLesson}},[e._v("Create Lesson")])])])},M=[],B=(r("d3b7"),r("25f0"),r("1315")),N=B["DateTime"].local(),F={name:"createLessonForm",computed:Object(_["a"])({},Object(c["b"])(["currentUser"])),data:function(){return{lessonInfo:{teacherId:null,startDateTime:null,duration:null,endDateTime:null,isRecurring:!1},startDateInput:null,startTimeInput:null,endDateInput:null,durationInput:null,disabledDates:{customPredictor:function(e){if(e<N)return!0}}}},methods:{createLesson:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.startDateInput&&null!=e.startTimeInput&&null!=e.durationInput){t.next=3;break}return alert("Please make sure all fields filled in!"),t.abrupt("return");case 3:return e.lessonInfo.teacherId=e.currentUser.id,e.lessonInfo.startDateTime=B["DateTime"].fromJSDate(e.startDateInput).toISODate()+" "+e.startTimeInput.HH+":"+e.startTimeInput.mm+":00",e.lessonInfo.startDateTime=B["DateTime"].fromSQL(e.lessonInfo.startDateTime).toSeconds(),e.lessonInfo.duration="PT"+e.durationInput.mm.toString()+"M",null!=e.endDateInput&&(e.lessonInfo.endDateTime=B["DateTime"].fromJSDate(e.endDateInput).toSeconds()),console.log("Create Lesson Form Output:",e.lessonInfo),t.next=11,e.$store.dispatch("createLesson",e.lessonInfo);case 11:r=t.sent,r.error?alert(r.error):alert("Lesson Created Successfully!");case 13:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.$store.dispatch("loadUsers")}},A=F,q=(r("7555"),Object(C["a"])(A,U,M,!1,null,null,null)),H=q.exports,J=r("f5ff"),V=r("3e32"),G=r("a20c"),W={name:"TeacherHomepage",computed:Object(_["a"])({},Object(c["b"])(["currentUser","teachersLessons","bookings"])),data:function(){return{calendarOptions:{plugins:[V["a"],G["a"]],initialView:"timeGridWeek",height:"100%",allDaySlot:!1,nowIndicator:!0,scrollTime:"09:00:00",eventClick:this.eventSelected,titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:!1},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"}},bookingModalInfo:{studentName:null,startTime:null,endTime:null,bookingId:null,lessonId:null,cancelled:!1},lessonModalInfo:{startTime:null,endTime:null,lessonId:null},cancelledBookings:[]}},methods:{showCreateLessonForm:function(){this.$modal.show("createLessonFormModal")},hideCreateLessonForm:function(){this.$modal.hide("createLessonFormModal"),console.log("Hide Create Lesson Form"),this.updateCalendar()},showBookingInfo:function(){this.$modal.show("bookingInfoModal")},hideBookingInfo:function(){this.$modal.hide("bookingInfoModal")},showLessonInfo:function(){this.$modal.show("lessonInfoModal")},hideLessonInfo:function(){this.$modal.hide("lessonInfoModal")},eventSelected:function(e){console.log("Event Selected",e),"Available Lesson"==e.event._def.title||e.event._def.extendedProps.cancelled?"Available Lesson"!=e.event._def.title&&e.event._def.extendedProps.cancelled?(this.bookingModalInfo.studentName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.lessonId=e.event._def.extendedProps.lessonId,this.bookingModalInfo.cancelled=!0,this.showBookingInfo()):(this.lessonModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.lessonModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.lessonModalInfo.lessonId=e.event._def.publicId,this.showLessonInfo()):(this.bookingModalInfo.studentName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.bookingId=e.event._def.publicId,this.bookingModalInfo.lessonId=e.event._def.extendedProps.lessonId,this.showBookingInfo())},cancelBooking:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.bookingModalInfo.bookingId,t.next=3,e.$store.dispatch("cancelBooking",r);case 3:n=t.sent,n.error?alert(n.error):(alert("Cancellation Successfully Cancelled"),e.hideBookingInfo(),e.updateCalendar());case 5:case"end":return t.stop()}}),t)})))()},deleteLessonSlotFromBooking:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("This lesson slot has bookings on it. Are you sure you want to delete all occurences of this lesson?")){t.next=16;break}return t.next=3,d().get("/bookings/lessonid/".concat(e.bookingModalInfo.lessonId));case 3:r=t.sent,n=r.data,a=0;case 6:if(!(a<n.length)){t.next=12;break}return t.next=9,d().delete("/bookings/".concat(n[a].id));case 9:a++,t.next=6;break;case 12:return t.next=14,e.$store.dispatch("deleteLesson",e.bookingModalInfo.lessonId);case 14:s=t.sent,s.error?alert(s.error):(alert("Lesson Deleted Successfully"),e.updateCalendar());case 16:case"end":return t.stop()}}),t)})))()},deleteLessonSlot:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d().get("/bookings/lessonid/".concat(e.lessonModalInfo.lessonId));case 2:if(r=t.sent,n=r.data,console.log("bookings:",n),0==n.length){t.next=13;break}if(!confirm("This lesson or another occurence of it has bookings on it. Are you sure you want to delete it?")){t.next=11;break}return t.next=9,e.$store.dispatch("deleteLesson",e.lessonModalInfo.lessonId);case 9:a=t.sent,a.error?alert(a.error):(alert("Lesson Deleted Successfully"),e.updateCalendar());case 11:t.next=18;break;case 13:if(!confirm("Are you sure you want to delete this lesson?")){t.next=18;break}return t.next=16,e.$store.dispatch("deleteLesson",e.lessonModalInfo.lessonId);case 16:s=t.sent,s.error?alert(s.error):(alert("Lesson Deleted Successfully"),e.updateCalendar());case 18:case"end":return t.stop()}}),t)})))()},fetchLessons:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={userId:e.currentUser.id,startDate:B["DateTime"].local().minus({years:.5}).toUTC().toISODate(),endDate:B["DateTime"].local().plus({years:.5}).toUTC().toISODate()},console.log(r),t.next=4,e.$store.dispatch("loadTeachersLessons",r);case 4:case"end":return t.stop()}}),t)})))()},updateCalendar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchLessons();case 2:r=e.$refs["calendar"].getApi(),r.getEventSourceById("teachersLessons").remove(),r.addEventSource({id:"teachersLessons",events:e.teachersLessons,color:"#52BE80",display:"block"});case 5:case"end":return t.stop()}}),t)})))()}},components:{CreateLesson:H,FullCalendar:J["a"]},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadUsers");case 2:return t.next=4,e.fetchLessons();case 4:return t.next=6,e.$store.dispatch("loadTeachersBookings",e.currentUser.id);case 6:for(r=0;r<e.bookings.length;r++)console.log,e.bookings[r].cancelled&&(e.cancelledBookings.push(e.bookings[r]),e.bookings.splice(r,1));n=e.$refs["calendar"].getApi(),n.addEventSource({id:"teachersLessons",events:e.teachersLessons,color:"#52BE80",display:"block"}),n.addEventSource({id:"bookings",events:e.bookings,color:"#E74C3C",display:"block"}),n.addEventSource({id:"cancelledBookings",events:e.cancelledBookings,color:"red"});case 11:case"end":return t.stop()}}),t)})))()}},z=W,K=(r("bbe4"),Object(C["a"])(z,j,D,!1,null,"7f89032c",null)),Z=K.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",{staticClass:"mt-3",attrs:{id:"calendarDiv",fluid:""}},[r("full-calendar",{ref:"calendar",attrs:{options:e.calendarOptions}})],1),r("modal",{attrs:{name:"bookingInfoModal",width:500,height:400}},[r("div",{staticClass:"text-center"},[r("div",[e.bookingModalInfo.cancelled?r("h1",[e._v("Cancelled Booking")]):r("h1",[e._v("Booking")]),r("p",[e._v(e._s(e.bookingModalInfo.startTime)+" - "+e._s(e.bookingModalInfo.endTime))]),r("p",[e._v("Teacher: "+e._s(e.bookingModalInfo.teacherName))])]),e.bookingModalInfo.cancelled?r("div",[r("b-button",{attrs:{variant:"danger",disabled:""},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1):r("div",[r("b-button",{attrs:{variant:"danger"},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1),r("b-button",{attrs:{variant:"outline-danger"},on:{click:e.hideBookingInfo}},[e._v("Close")])],1)])],1)},X=[],Y={name:"StudentHomepage",computed:Object(_["a"])({},Object(c["b"])(["currentUser","bookings"])),data:function(){return{calendarOptions:{plugins:[V["a"],G["a"]],initialView:"timeGridWeek",eventClick:this.eventSelected,height:"100%",allDaySlot:!1,nowIndicator:!0,scrollTime:"09:00:00",titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:!1},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"}},bookingModalInfo:{teacherName:null,startTime:null,endTime:null,bookingId:null,cancelled:!1},cancelledBookings:[]}},methods:{showBookingInfo:function(){this.$modal.show("bookingInfoModal")},hideBookingInfo:function(){this.$modal.hide("bookingInfoModal")},cancelBooking:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.bookingModalInfo.bookingId,t.next=3,e.$store.dispatch("cancelBooking",r);case 3:n=t.sent,n.error?alert(n.error):(alert("Cancellation Successfully Cancelled"),e.hideBookingInfo(),e.updateCalendar());case 5:case"end":return t.stop()}}),t)})))()},eventSelected:function(e){e.event._def.extendedProps.cancelled?(this.bookingModalInfo.teacherName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.cancelled=!0,this.showBookingInfo()):(this.bookingModalInfo.teacherName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.bookingId=e.event._def.publicId,this.showBookingInfo())},updateCalendar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadStudentsBookings",e.currentUser.id);case 2:for(r=0;r<e.bookings.length;r++)e.bookings[r].cancelled&&(e.cancelledBookings.push(e.bookings[r]),e.bookings.splice(r,1));n=e.$refs["calendar"].getApi(),n.getEventSourceById("studentBookings").remove(),n.getEventSourceById("studentCancelled").remove(),n.addEventSource({id:"studentBookings",events:e.bookings,color:"#E74C3C",display:"block"}),n.addEventSource({id:"studentCancelled",events:e.cancelledBookings,color:"red"});case 8:case"end":return t.stop()}}),t)})))()}},components:{FullCalendar:J["a"]},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("loadUsers"),t.next=3,e.$store.dispatch("loadStudentsBookings",e.currentUser.id);case 3:for(r=0;r<e.bookings.length;r++)e.bookings[r].cancelled&&(e.cancelledBookings.push(e.bookings[r]),e.bookings.splice(r,1));n=e.$refs["calendar"].getApi(),n.addEventSource({id:"studentBookings",events:e.bookings,color:"#E74C3C",display:"block"}),n.addEventSource({id:"studentCancelled",events:e.cancelledBookings,color:"red"});case 7:case"end":return t.stop()}}),t)})))()}},ee=Y,te=(r("161f"),Object(C["a"])(ee,Q,X,!1,null,"924b4e5c",null)),re=te.exports,ne={name:"Homepage",computed:Object(_["a"])({},Object(c["b"])(["currentUser"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadUsers");case 2:console.log(e.currentUser);case 3:case"end":return t.stop()}}),t)})))()},components:{TeacherHomepage:Z,StudentHomepage:re}},ae=ne,se=Object(C["a"])(ae,$,P,!1,null,"6d3edcc3",null),oe=se.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center",attrs:{id:"loginPage"}},[r("form",{staticClass:"form-signin"},[r("h1",{staticClass:"my-5"},[e._v("Login")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.email,expression:"loginInfo.email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Email",id:"emailInput"},domProps:{value:e.loginInfo.email},on:{input:function(t){t.target.composing||e.$set(e.loginInfo,"email",t.target.value)}}}),r("div",{staticClass:"input-group mt-3"},["checkbox"===(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"checkbox"},domProps:{checked:Array.isArray(e.loginInfo.password)?e._i(e.loginInfo.password,null)>-1:e.loginInfo.password},on:{change:function(t){var r=e.loginInfo.password,n=t.target,a=!!n.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);n.checked?o<0&&e.$set(e.loginInfo,"password",r.concat([s])):o>-1&&e.$set(e.loginInfo,"password",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.loginInfo,"password",a)}}}):"radio"===(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"radio"},domProps:{checked:e._q(e.loginInfo.password,null)},on:{change:function(t){return e.$set(e.loginInfo,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:e.showPassword?"text":"password"},domProps:{value:e.loginInfo.password},on:{input:function(t){t.target.composing||e.$set(e.loginInfo,"password",t.target.value)}}}),r("div",{staticClass:"input-group-append"},[r("b-button",{attrs:{variant:"outline-primary",type:"button"},on:{click:function(t){e.showPassword=!e.showPassword}}},[r("b-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1)],1)]),r("button",{staticClass:"btn btn-primary mt-5",attrs:{type:"button"},on:{click:e.loginUser}},[e._v("Submit")])])])},ce=[],le={name:"LoginForm",data:function(){return{showPassword:!1,loginInfo:{email:"",password:""}}},methods:{loginUser:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loginUser",e.loginInfo);case 2:r=t.sent,r.error?alert(r.error):e.$router.push({name:"homepage"});case 4:case"end":return t.stop()}}),t)})))()}}},ue=le,de=(r("5694"),Object(C["a"])(ue,ie,ce,!1,null,"cadd60bc",null)),pe=de.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register text-center"},[r("h1",{staticClass:"my-5"},[e._v("Register")]),r("div"),r("h3",{staticClass:"my-2"},[e._v("I am a...")]),r("button",{staticClass:"btn btn-outline-primary mx-3",on:{click:e.registerStudentRedirect}},[e._v("Student")]),r("button",{staticClass:"btn btn-outline-primary mx-3",on:{click:e.registerTeacherRedirect}},[e._v("Teacher")])])},fe=[],ge={name:"RegisterForm",methods:{registerStudentRedirect:function(){this.$router.push({name:"registerFormStudent"})},registerTeacherRedirect:function(){this.$router.push({name:"registerFormTeacher"})}}},he=ge,ve=(r("6ef5"),Object(C["a"])(he,me,fe,!1,null,"5d997748",null)),be=ve.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ValidationObserver",{staticClass:"form-register text-center",attrs:{id:"registerPage"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[r("form",{staticClass:"form-register"},[r("h1",{staticClass:"mb-5"},[e._v("Student Register")]),r("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("First Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.fname,expression:"registerInfo.fname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"First Name",id:"fnameInput"},domProps:{value:e.registerInfo.fname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"fname",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Last Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.lname,expression:"registerInfo.lname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name",id:"lnameInput"},domProps:{value:e.registerInfo.lname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"lname",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|email|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Email")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.email,expression:"registerInfo.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email",id:"emailInput"},domProps:{value:e.registerInfo.email},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"email",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|min:8|max:50|password"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Password")])]),"checkbox"===(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"checkbox"},domProps:{checked:Array.isArray(e.registerInfo.password)?e._i(e.registerInfo.password,null)>-1:e.registerInfo.password},on:{change:function(t){var r=e.registerInfo.password,n=t.target,a=!!n.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);n.checked?o<0&&e.$set(e.registerInfo,"password",r.concat([s])):o>-1&&e.$set(e.registerInfo,"password",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.registerInfo,"password",a)}}}):"radio"===(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"radio"},domProps:{checked:e._q(e.registerInfo.password,null)},on:{change:function(t){return e.$set(e.registerInfo,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:e.showPassword?"text":"password"},domProps:{value:e.registerInfo.password},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"password",t.target.value)}}}),r("div",{staticClass:"input-group-append"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){e.showPassword=!e.showPassword}}},[r("b-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1)],1)]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("div",{staticClass:"mt-5"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:n},on:{click:e.registerUser}},[e._v("Submit")])])],1)]}}])})],1)},we=[],ke=(r("ac1f"),r("466d"),r("7bb1")),_e=r("4c93"),xe=r("2593"),Se=r("1157");Object(ke["c"])("required",_e["d"]),Object(ke["c"])("email",_e["a"]),Object(ke["c"])("min",_e["c"]),Object(ke["c"])("max",_e["b"]),Object(ke["c"])("password",(function(e){var t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,50}$/;return e.match(t)})),Object(ke["d"])({en:{messages:xe.messages,names:{fnameInput:"First Name",lnameInput:"Last Name",emailInput:"E-mail Address",passwordInput:"Password"},fields:{fnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},lnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},emailInput:{required:"{_field_} is required",email:"{_field_} is invalid",max:"{_field_} must be less than 50 characters long"},passwordInput:{required:"{_field_} is required",min:"{_field_} must be at least 8 characters long",max:"{_field_} must be less than 50 characters long",password:"{_field_} invalid. Must contain an upper case, lower case, number and symbol."}}}});var Ce={name:"registerFormStudent",computed:Object(_["a"])({},c["b"]["currentUser"]),data:function(){return{showPassword:!1,registerInfo:{fname:"",lname:"",email:"",password:"",isTeacher:0,hourly:null}}},methods:{registerUser:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("registerUser",e.registerInfo);case 2:r=t.sent,r.error?alert(r.error):(alert("Welcome",r.fname),console.log("Student Registered!"),e.$router.push({name:"homepage"}));case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.$store.dispatch("loadUsers"),Object(Se["isEmptyObject"])(this.currentUser)||this.$router.push({name:"homepage"})},components:{ValidationObserver:ke["a"],ValidationProvider:ke["b"]}},ye=Ce,Te=(r("c251"),Object(C["a"])(ye,Ie,we,!1,null,"bd530422",null)),Ee=Te.exports,Oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ValidationObserver",{staticClass:"form-register text-center",attrs:{id:"registerPage"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.invalid;return[r("form",{staticClass:"form-register"},[r("h1",{staticClass:"mb-5"},[e._v("Teacher Register")]),r("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("First Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.fname,expression:"registerInfo.fname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"First Name",id:"fnameInput"},domProps:{value:e.registerInfo.fname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"fname",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Last Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.lname,expression:"registerInfo.lname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name",id:"lnameInput"},domProps:{value:e.registerInfo.lname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"lname",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|email|max:50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Email")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.email,expression:"registerInfo.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email",id:"emailInput"},domProps:{value:e.registerInfo.email},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"email",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required|min:8|max:50|password"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Password")])]),"checkbox"===(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"checkbox"},domProps:{checked:Array.isArray(e.registerInfo.password)?e._i(e.registerInfo.password,null)>-1:e.registerInfo.password},on:{change:function(t){var r=e.registerInfo.password,n=t.target,a=!!n.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);n.checked?o<0&&e.$set(e.registerInfo,"password",r.concat([s])):o>-1&&e.$set(e.registerInfo,"password",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.registerInfo,"password",a)}}}):"radio"===(e.showPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"radio"},domProps:{checked:e._q(e.registerInfo.password,null)},on:{change:function(t){return e.$set(e.registerInfo,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:e.showPassword?"text":"password"},domProps:{value:e.registerInfo.password},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"password",t.target.value)}}}),r("div",{staticClass:"input-group-append"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){e.showPassword=!e.showPassword}}},[r("b-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1)],1)]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("div",{staticClass:"input-group pt-3"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Hourly Rate")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.hourly,expression:"registerInfo.hourly"}],staticClass:"form-control",attrs:{type:"number",id:"hourlyInput",min:"0",max:"999"},domProps:{value:e.registerInfo.hourly},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"hourly",t.target.value)}}})]),r("span",{staticClass:"error"},[e._v(e._s(n[0]))])]}}],null,!0)}),r("div",{staticClass:"mt-5"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:n},on:{click:e.registerUser}},[e._v("Submit")])])],1)]}}])})],1)},Re=[];Object(ke["c"])("required",_e["d"]),Object(ke["c"])("email",_e["a"]),Object(ke["c"])("min",_e["c"]),Object(ke["c"])("max",_e["b"]),Object(ke["c"])("password",(function(e){var t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,50}$/;return e.match(t)})),Object(ke["d"])({en:{messages:xe.messages,names:{fnameInput:"First Name",lnameInput:"Last Name",emailInput:"E-mail Address",passwordInput:"Password",hourlyInput:"Hourly Rate"},fields:{fnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},lnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},emailInput:{required:"{_field_} is required",email:"{_field_} is invalid",max:"{_field_} must be less than 50 characters long"},passwordInput:{required:"{_field_} is required",min:"{_field_} must be at least 8 characters long",max:"{_field_} must be less than 50 characters long",password:"{_field_} invalid. Must contain an upper case, lower case, number and symbol."},hourlyInput:{required:"{_field_} is required"}}}});var Le={name:"registerFormTeacher",computed:Object(_["a"])({},c["b"]["currentUser"]),data:function(){return{showPassword:!1,registerInfo:{fname:"",lname:"",email:"",password:"",isTeacher:1,hourly:null}}},methods:{registerUser:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("registerUser",e.registerInfo);case 2:r=t.sent,console.log("User:",r),console.log("User Error",r.error),r.error?alert(r.error):(alert("Welcome",r.fname),console.log("Teacher Registered!"),e.$router.push({name:"homepage"}));case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.$store.dispatch("loadUsers"),Object(Se["isEmptyObject"])(this.currentUser)||this.$router.push({name:"homepage"})},components:{ValidationObserver:ke["a"],ValidationProvider:ke["b"]}},$e=Le,Pe=(r("d162"),Object(C["a"])($e,Oe,Re,!1,null,"46c5ccf4",null)),je=Pe.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"mt-5",attrs:{id:"teacherSearch"}},[r("div",{staticClass:"input-group"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Search Teachers")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput.input,expression:"searchInput.input"}],attrs:{type:"text",placeholder:"Enter A Name"},domProps:{value:e.searchInput.input},on:{input:[function(t){t.target.composing||e.$set(e.searchInput,"input",t.target.value)},e.searchForTeachers]}})]),r("div",[e._l(e.teachers,(function(t){return r("div",{key:t.id,staticClass:"mt-1"},[e._v(" "+e._s(t.fname)+" "),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(r){return e.showTeacherInfo(t)}}},[e._v("Info")])])})),r("modal",{attrs:{name:"teacherInfoModal",width:500,height:300}},[r("div",{staticClass:"text-center"},[r("div",[r("h1",{staticClass:"mt-4"},[e._v(e._s(e.teacherInfo.fname))]),r("p",{staticClass:"mt-2"},[e._v("Email: "+e._s(e.teacherInfo.email))]),r("p",{staticClass:"mt-2"},[e._v("Hourly Rate: "+e._s(e.teacherInfo.hourly))])]),r("div",[r("button",{staticClass:"btn btn-success mt-2",on:{click:e.teacherBookingPageRedirect}},[e._v("Book A Lesson")])]),r("button",{staticClass:"btn btn-outline-danger mt-4",on:{click:e.hideTeacherInfo}},[e._v("Close")])])])],2)])},Ue=[],Me={name:"bookingPage",computed:Object(_["a"])({},Object(c["b"])(["currentUser","teachers"])),data:function(){return{searchInput:{input:""},teacherInfo:{}}},methods:{searchForTeachers:function(){this.$store.commit("CLEAR_TEACHERS"),this.$store.dispatch("searchForTeachers",this.searchInput)},showTeacherInfo:function(e){this.teacherInfo=e,this.$modal.show("teacherInfoModal")},hideTeacherInfo:function(){this.$modal.hide("teacherInfoModal")},teacherBookingPageRedirect:function(){var e=this.teacherInfo.id;this.$router.push({name:"lessonBooking",params:{teacherId:e}})}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("loadUsers");case 1:case"end":return t.stop()}}),t)})))()}},Be=Me,Ne=(r("d6a8"),Object(C["a"])(Be,De,Ue,!1,null,"21a131c4",null)),Fe=Ne.exports,Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Lesson Booking")]),r("full-calendar",{ref:"calendar",attrs:{options:e.calendarOptions},on:{refreshCalendar:e.fetchLessons}})],1)},qe=[],He={name:"lessonBooking",props:["teacherId"],computed:Object(_["a"])({},Object(c["b"])(["currentUser","teachersLessons","bookings"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("loadUsers"),t.next=3,e.fetchLessons();case 3:r=e.$refs["calendar"].getApi(),r.addEventSource(e.teachersLessons);case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{calendarOptions:{plugins:[V["a"],G["a"]],initialView:"timeGridWeek",height:620,allDaySlot:!1,nowIndicator:!0,scrollTime:"09:00:00",eventClick:this.lessonSlotClick,titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:!1},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"}},selectedLessonSlot:{startDate:null,endDate:null,lessonId:null}}},methods:{fetchLessons:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={userId:e.teacherId,startDate:B["DateTime"].local().toUTC().toISODate(),endDate:B["DateTime"].local().plus({years:2}).toUTC().toISODate()},t.next=3,e.$store.dispatch("loadTeachersLessons",r);case 3:case"end":return t.stop()}}),t)})))()},lessonSlotClick:function(e){if(this.selectedLessonSlot.startDate=B["DateTime"].fromJSDate(e.event._instance.range.start).toUTC().toFormat("yyyy-MM-dd HH:mm:ss"),this.selectedLessonSlot.lessonId=e.event._def.publicId,confirm("Are you sure you want to book this lesson?")){var t={studentId:this.currentUser.id,lessonId:this.selectedLessonSlot.lessonId,dateTime:this.selectedLessonSlot.startDate,cancelled:0};this.$store.dispatch("createBooking",t),this.$router.push({name:"homepage"})}}},components:{FullCalendar:J["a"]}},Je=He,Ve=Object(C["a"])(Je,Ae,qe,!1,null,null,null),Ge=Ve.exports,We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("div",{staticClass:"input-group mt-5"},[r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text"},[e._v("Search Students")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput.input,expression:"searchInput.input"}],attrs:{type:"text",placeholder:"Enter A Name"},domProps:{value:e.searchInput.input},on:{input:[function(t){t.target.composing||e.$set(e.searchInput,"input",t.target.value)},e.searchForStudents]}})]),r("div",[e._l(e.students,(function(t){return r("div",{key:t.id,staticClass:"mt-2"},[e._v(" "+e._s(t.fname)+" "),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(r){return e.showStudentInfo(t)}}},[e._v("Info")])])})),r("modal",{attrs:{name:"studentInfoModal",width:500,height:400}},[r("div",{staticClass:"text-center"},[r("div",[r("h1",{staticClass:"mt-5"},[e._v(e._s(e.studentInfo.fname))]),r("h1",{staticClass:"mt-1"},[e._v(e._s(e.studentInfo.lname))]),r("p",{staticClass:"mt-4"},[e._v("Email: "+e._s(e.studentInfo.email))])]),r("button",{staticClass:"btn btn-outline-danger mt-5",on:{click:e.hideStudentInfo}},[e._v("Close")])])])],2)])},ze=[],Ke={name:"studentSearch",computed:Object(_["a"])({},Object(c["b"])(["currentUser","students"])),data:function(){return{searchInput:{input:"",teacherId:null},studentInfo:{}}},methods:{searchForStudents:function(){this.searchInput.teacherId=this.currentUser.id,this.$store.commit("CLEAR_STUDENTS"),this.$store.dispatch("searchForStudents",this.searchInput)},showStudentInfo:function(e){this.studentInfo=e,this.$modal.show("studentInfoModal")},hideStudentInfo:function(){this.$modal.hide("studentInfoModal")}},mounted:function(){this.$store.dispatch("loadUsers")}},Ze=Ke,Qe=Object(C["a"])(Ze,We,ze,!1,null,"751022ac",null),Xe=Qe.exports,Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("h1",[e._v("Invoicing")])])},et=[],tt={name:"invoicingPage",computed:Object(_["a"])({},Object(c["b"])(["currentUser","invoice"])),data:function(){return{invoiceSearchData:{id:null,start:null,end:null}}},methods:{createInvoice:function(){this.$store.dispatch("loadInvoiceData",this.invoiceSearchData)}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("loadUsers");case 1:case"end":return t.stop()}}),t)})))()}},rt=tt,nt=Object(C["a"])(rt,Ye,et,!1,null,null,null),at=nt.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e._m(0),r("div",{staticClass:"text-center my-5"},[r("router-link",{attrs:{to:"/register"}},[r("button",{staticClass:"btn btn-outline-primary"},[e._v("Sign up")])])],1),r("div",{staticClass:"text-center my-5"},[r("router-link",{attrs:{to:"/login"}},[r("button",{staticClass:"btn btn-outline-primary"},[e._v("Login")])])],1)])},ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center my-5"},[r("h1",[e._v("Music Lesson Scheduling Tool")])])}],it={name:"LandingPage",computed:Object(_["a"])({},Object(c["b"])(["currentUser"])),mounted:function(){this.$store.dispatch("loadUsers")}},ct=it,lt=Object(C["a"])(ct,st,ot,!1,null,null,null),ut=lt.exports,dt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},pt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Error 404. Page Not Found")])])}],mt={name:"Error404",computed:Object(_["a"])({},Object(c["b"])(["currentUser"])),mounted:function(){this.$store.dispatch("loadUsers")}},ft=mt,gt=Object(C["a"])(ft,dt,pt,!1,null,null,null),ht=gt.exports,vt=function(e,t,r){Object(Se["isEmptyObject"])(p.state.currentUser)?r({name:"landingPage"}):r()},bt=function(e,t,r){Object(Se["isEmptyObject"])(p.state.currentUser)||p.state.currentUser.isTeacher?r({name:"homepage"}):r()},It=function(e,t,r){!Object(Se["isEmptyObject"])(p.state.currentUser)&&p.state.currentUser.isTeacher?r():r({name:"homepage"})},wt=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p.dispatch("loadUsers");case 2:Object(Se["isEmptyObject"])(p.state.currentUser)?n():n({name:"homepage"});case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();n["default"].component("Datepicker",m["a"]),n["default"].component("Timepicker",g.a),n["default"].use(v.a),n["default"].use(s["a"]),n["default"].use(o["a"]),n["default"].config.productionTip=!1,n["default"].use(a["a"]);var kt=new a["a"]({routes:[{path:"/",component:ut,name:"landingPage",beforeEnter:wt},{path:"/home",component:oe,name:"homepage",beforeEnter:vt},{path:"/login",component:pe,name:"loginForm",beforeEnter:wt},{path:"/register",component:be,name:"registerForm",beforeEnter:wt},{path:"/registerStudent",component:Ee,name:"registerFormStudent",beforeEnter:wt},{path:"/registerTeacher",component:je,name:"registerFormTeacher",beforeEnter:wt},{path:"/booking",component:Fe,name:"bookingPage",beforeEnter:bt},{path:"/lesson/booking/:teacherId",component:Ge,name:"lessonBooking",props:!0,beforeEnter:bt},{path:"/students",component:Xe,name:"studentSearch",beforeEnter:It},{path:"/invoicing",component:at,name:"invoicing",beforeEnter:It},{path:"/*",component:ht,name:"404"}]});new n["default"]({render:function(e){return e(L)},store:p,router:kt}).$mount("#app")},"5fd6":function(e,t,r){},"6ef5":function(e,t,r){"use strict";var n=r("a2a1"),a=r.n(n);a.a},"74fd":function(e,t,r){},7555:function(e,t,r){"use strict";var n=r("4646"),a=r.n(n);a.a},"75d1":function(e,t,r){},"85ec":function(e,t,r){},8662:function(e,t,r){},a2a1:function(e,t,r){},ade3:function(e,t,r){},bbe4:function(e,t,r){"use strict";var n=r("74fd"),a=r.n(n);a.a},c251:function(e,t,r){"use strict";var n=r("ade3"),a=r.n(n);a.a},c440:function(e,t,r){},d162:function(e,t,r){"use strict";var n=r("c440"),a=r.n(n);a.a},d1d4:function(e,t,r){"use strict";var n=r("75d1"),a=r.n(n);a.a},d6a8:function(e,t,r){"use strict";var n=r("5fd6"),a=r.n(n);a.a}});
//# sourceMappingURL=app.5cd3dde6.js.map