(function(e){function t(t){for(var r,n,i=t[0],l=t[1],c=t[2],u=0,m=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&m.push(o[n][0]),o[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var l=s[i];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var r={},o={app:0},a=[];function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=r,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0712":function(e,t,s){},1399:function(e,t,s){"use strict";s("3314")},"1bf2":function(e,t,s){},"1e10":function(e,t,s){},"1e1a":function(e,t,s){"use strict";s("88ac")},2358:function(e,t,s){"use strict";s("1bf2")},"2cf4":function(e,t,s){},"2d05":function(e,t,s){},"2e6d":function(e,t,s){},3314:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),o=s("8c4f"),a=s("5f5b"),n=s("b1e0"),i=(s("f9e3"),s("2dd8"),s("2f62")),l=s("bc3a"),c=s.n(l),d=()=>c.a.create({baseURL:"http://localhost:8080/api",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}});r["default"].use(i["a"]);var u=new i["a"].Store({state:{users:[],currentUser:{},teachersLessons:[],teachers:[],bookings:[],students:[]},mutations:{SET_USERS(e,t){e.users=t},LOGOUT_USER(e){e.currentUser={},window.localStorage.currentUser=JSON.stringify({})},SET_CURRENT_USER(e,t){e.currentUser=t,window.localStorage.currentUser=JSON.stringify(t)},SET_TEACHERS_LESSONS(e,t){e.teachersLessons=t},SET_TEACHERS(e,t){e.teachers=t},CLEAR_TEACHERS(e){e.teachers=[]},ADD_BOOKING(e,t){e.bookings.append(t)},SET_BOOKINGS(e,t){e.bookings=t},SET_STUDENTS(e,t){e.students=t},CLEAR_STUDENTS(e){e.students=[]}},actions:{async loadUsers({commit:e}){let t=await d().get("/users"),s=t.data;e("SET_USERS",s);let r=JSON.parse(window.localStorage.currentUser);e("SET_CURRENT_USER",r)},logoutUser({commit:e}){e("LOGOUT_USER")},async loadTeachersLessons({commit:e},t){try{let s=await d().post("/search/teachers/lessons",t),r=s.data.lessonInstances,o=await d().get("/teachers/bookings/"+t.userId),a=o.data;console.log("lessonLength",r.length);for(let e=0;e<r.length;e++){console.log("Lesson1",e);for(let t=0;t<a.length;t++)console.log("Booking1",t),a[t].lessonId==r[e].id&&r[e].start==a[t].start&&(console.log("Booking lesson overlap triggered"),r.splice(e,1))}e("SET_TEACHERS_LESSONS",r)}catch{return{error:"There was an error when loading teachers lessons"}}},async loginUser({commit:e},t){try{let s=await d().post("/users/sessions",t),r=s.data;return r.error?r.error:(e("SET_CURRENT_USER",r),r)}catch{return{error:"Username/Password was incorrect. Please try again"}}},async registerUser({commit:e},t){try{let s=await d().post("/users",t),r=s.data;return r.error?r.error:(e("SET_CURRENT_USER",r),r)}catch{return{error:"There was an error. Please try registering again"}}},async createLesson({commit:e},t){try{let s=await d().post("/lessons",t),r=s.data;return r.error?r.error:(e("SET_TEACHERS_LESSONS",r),r)}catch{return{error:"There was an error while creating the lesson"}}},async searchForTeachers({commit:e},t){try{console.log("searchInput:",t);let s=await d().post("/teachers/search",t);console.log(s);let r=s.data;return r.error?r.error:(e("SET_TEACHERS",r),r)}catch{return{error:"There was an error while searching the teachers"}}},async searchForStudents({commit:e},t){try{console.log("searchInput:",t);let s=await d().post("/students/search",t);console.log(s);let r=s.data;return r.error?r.error:(e("SET_STUDENTS",r),r)}catch{return{error:"There was an error while searching for that student"}}},async createBooking({commit:e},t){try{console.log(t);let s=await d().post("/bookings",t);console.log("Create Booking Store response",s);let r=s.data;return r.error?r.error:(e("ADD_BOOKING",r),r)}catch{return{error:"There was an error while creating the booking"}}},async loadTeachersBookings({commit:e},t){try{let s=await d().get("/teachers/bookings/"+t),r=s.data;for(let e=0;e<r.length;e++)try{let t=await d().get("/users/"+r[e].studentId),s=t.data;r[e].title=s.fname+" "+s.lname}catch{r[e].title="Name Error"}return r.error?r.error:void e("SET_BOOKINGS",r)}catch{return{error:"There was an error while getting the teachers bookings"}}},async loadStudentsBookings({commit:e},t){try{let s=await d().get("/students/bookings/"+t),r=s.data;if(r.error)return r.error;for(let e=0;e<r.length;e++)try{let t=await d().get("/users/"+r[e].teacherId),s=t.data;r[e].title=s.fname+" "+s.lname}catch{r[e].title="Name Error"}return void e("SET_BOOKINGS",r)}catch{return{error:"There was an error while getting the students bookings"}}},async cancelBooking({commit:e},t){try{let s=await d().post("/bookings/cancel/"+t),r=s.data;return r.error?r.error:(e("SET_BOOKINGS",[]),r)}catch{return{error:"There was an error while cancelling the booking. Please try again"}}},async deleteLesson({commit:e},t){try{let s=await d().delete("/lessons/"+t),r=s.data;return console.log("Deletion",r),r.error?r.error:(e("SET_TEACHERS_LESSONS",[]),r)}catch{return{error:"There was an error while deleting the lesson."}}}}}),m=s("fa33"),p=s("97fc"),h=s.n(p),g=(s("1e11"),s("1881")),f=s.n(g),v=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header"),e._m(0),t("router-view",{attrs:{id:"body"}})],1)},b=[function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v("Test")])])}],I=function(){var e=this,t=e._self._c;return e.currentUser.fname&&!e.currentUser.isTeacher?t("b-navbar",{attrs:{toggleable:"lg",variant:"primary",type:"dark",id:"navbar"}},[t("b-navbar-brand",[e._v("Music Lessons")]),t("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t("b-navbar-nav",[t("b-nav-item",{on:{click:e.homepageRedirect}},[e._v("Home")]),t("b-nav-item",{on:{click:e.redirectBookingPage}},[e._v("Book Lessons")])],1),t("b-navbar-nav",{staticClass:"ml-auto"},[t("b-nav-text",[t("span",{attrs:{id:"name"}},[e._v(e._s(e.currentUser.fname))])]),t("b-nav-item",{on:{click:e.logoutUser}},[t("b-button",{attrs:{size:"sm",variant:"danger"}},[e._v("Logout")])],1)],1)],1)],1):e.currentUser.fname&&e.currentUser.isTeacher?t("b-navbar",{attrs:{toggleable:"lg",variant:"primary",type:"dark",id:"navbar"}},[t("b-navbar-brand",[e._v("Music Lessons")]),t("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t("b-navbar-nav",[t("b-nav-item",{on:{click:e.homepageRedirect}},[e._v("Home")]),t("b-nav-item",{on:{click:e.studentsRedirect}},[e._v("Students")]),t("b-nav-item",{on:{click:e.invoiceRedirect}},[e._v("Invoicing")])],1),t("b-navbar-nav",{staticClass:"ml-auto"},[t("b-nav-text",[t("span",{attrs:{id:"name"}},[e._v(e._s(e.currentUser.fname))])]),t("b-nav-item",{on:{click:e.logoutUser}},[t("b-button",{attrs:{size:"sm",variant:"danger"}},[e._v("Logout")])],1)],1)],1)],1):t("b-navbar",{attrs:{toggleable:"lg",variant:"primary",type:"dark",id:"navbar"}},[t("b-navbar-brand",[e._v("Music Lessons")]),t("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[t("b-navbar-nav",[t("b-nav-item",{on:{click:e.loginRedirect}},[e._v("Login")]),t("b-nav-item",{on:{click:e.registerRedirect}},[e._v("Register")])],1)],1)],1)},_=[],w=(s("14d9"),{name:"Header",computed:{...Object(i["b"])(["currentUser"])},methods:{logoutUser(){this.$store.dispatch("logoutUser"),this.$router.push({name:"landingPage"})},loginRedirect(){this.$router.push({name:"loginForm"})},registerRedirect(){this.$router.push({name:"registerForm"})},homepageRedirect(){this.$router.push({name:"homepage"})},studentsRedirect(){this.$router.push({name:"studentSearch"})},redirectBookingPage(){this.$router.push({name:"bookingPage"})},invoiceRedirect(){this.$router.push({name:"invoicing"})}}}),k=w,y=(s("7009"),s("2877")),C=Object(y["a"])(k,I,_,!1,null,"0b1792c9",null),S=C.exports,T={name:"App",components:{Header:S}},E=T,x=(s("f167"),Object(y["a"])(E,v,b,!1,null,null,null)),L=x.exports,P=function(){var e=this,t=e._self._c;return t("div",[0===e.currentUser.isTeacher?t("div",[t("student-homepage")],1):t("div",[t("teacher-homepage")],1)])},D=[],O=function(){var e=this,t=e._self._c;return t("b-container",{attrs:{fluid:""}},[t("b-row",{staticClass:"mt-2"},[t("b-col",{attrs:{fluid:""}},[t("b-button",{staticClass:"float-right",attrs:{variant:"primary",right:""},on:{click:e.showCreateLessonForm}},[e._v("Create New Lesson Slot")])],1)],1),t("b-row",{staticClass:"mt-2",attrs:{id:"calendarContainer"}},[t("b-col",[t("full-calendar",{ref:"calendar",attrs:{options:e.calendarOptions},on:{refreshCalendar:e.fetchLessons}})],1)],1),t("modal",{attrs:{name:"createLessonFormModal",width:300,height:640}},[t("div",{staticClass:"text-center"},[t("create-lesson"),t("button",{staticClass:"btn btn-outline-danger mt-5",on:{click:e.hideCreateLessonForm}},[e._v("Close")])],1)]),t("modal",{attrs:{name:"bookingInfoModal",width:500,height:400}},[t("div",{staticClass:"text-center"},[t("div",[e.bookingModalInfo.cancelled?t("h1",[e._v("Cancelled Booking")]):t("h1",[e._v("Booking")]),t("p",[e._v(e._s(e.bookingModalInfo.startTime)+" - "+e._s(e.bookingModalInfo.endTime))]),t("p",[e._v("Student: "+e._s(e.bookingModalInfo.studentName))])]),e.bookingModalInfo.cancelled?t("div",[t("b-button",{attrs:{variant:"danger",disabled:""},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1):t("div",[t("b-button",{attrs:{variant:"danger"},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1),t("b-button",{attrs:{variant:"danger"},on:{click:e.deleteLessonSlotFromBooking}},[e._v("Delete Lesson Slot")]),t("b-button",{attrs:{variant:"outline-danger"},on:{click:e.hideBookingInfo}},[e._v("Close")])],1)]),t("modal",{attrs:{name:"lessonInfoModal",width:500,height:400}},[t("div",{staticClass:"text-center"},[t("div",[t("h1",[e._v("Lesson Slot")]),t("p",[e._v(e._s(e.lessonModalInfo.startTime)+" - "+e._s(e.lessonModalInfo.endTime))])]),t("div",[t("button",{staticClass:"btn btn-danger",on:{click:e.deleteLessonSlot}},[e._v("Delete Lesson Slot")])]),t("button",{staticClass:"btn btn-outline-danger",on:{click:e.hideLessonInfo}},[e._v("Close")])])])],1)},U=[],$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t("div",[t("h3",{staticClass:"my-3"},[e._v("Create New Lesson Slot")]),t("div",{staticClass:"my-4"},[t("span",{staticClass:"mb-2"},[e._v("Date and Time")]),t("Datepicker",{attrs:{"bootstrap-styling":!0,inline:!1,placeholder:"Date","disabled-dates":e.disabledDates},model:{value:e.startDateInput,callback:function(t){e.startDateInput=t},expression:"startDateInput"}}),t("Timepicker",{attrs:{name:"StartTimePicker"},model:{value:e.startTimeInput,callback:function(t){e.startTimeInput=t},expression:"startTimeInput"}})],1),t("div",{staticClass:"mt-4"},[t("label",{staticClass:"mx-2",attrs:{for:"DurationPicker"}},[e._v("Lesson Duration")]),t("Timepicker",{attrs:{name:"StartTimePicker",format:"mm","hour-range":[],"hide-disabled-hours":""},model:{value:e.durationInput,callback:function(t){e.durationInput=t},expression:"durationInput"}})],1),t("div",{staticClass:"mt-4"},[t("label",{staticClass:"mx-2",attrs:{for:"Repeat"}},[e._v("Repeat Weekly?")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lessonInfo.isRecurring,expression:"lessonInfo.isRecurring"}],staticClass:"mx-2",attrs:{type:"checkbox",name:"Repeat"},domProps:{checked:Array.isArray(e.lessonInfo.isRecurring)?e._i(e.lessonInfo.isRecurring,null)>-1:e.lessonInfo.isRecurring},on:{change:function(t){var s=e.lessonInfo.isRecurring,r=t.target,o=!!r.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);r.checked?n<0&&e.$set(e.lessonInfo,"isRecurring",s.concat([a])):n>-1&&e.$set(e.lessonInfo,"isRecurring",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.lessonInfo,"isRecurring",o)}}})]),e.lessonInfo.isRecurring?t("div",[t("Datepicker",{attrs:{name:"repeatUntilDate","bootstrap-styling":!0,inline:!1,placeholder:"Repeat Weekly Until...","disabled-dates":e.disabledDates},model:{value:e.endDateInput,callback:function(t){e.endDateInput=t},expression:"endDateInput"}}),t("span",{staticClass:"userNotice"},[e._v("(Leave blank for repeat forever)")])],1):e._e(),t("button",{staticClass:"btn btn-outline-success my-3",on:{click:e.createLesson}},[e._v("Create Lesson")])])])},M=[],B=s("1315");let R=B["DateTime"].local();var N={name:"createLessonForm",computed:{...Object(i["b"])(["currentUser"])},data(){return{lessonInfo:{teacherId:null,startDateTime:null,duration:null,endDateTime:null,isRecurring:!1},startDateInput:null,startTimeInput:null,endDateInput:null,durationInput:null,disabledDates:{customPredictor:function(e){if(e<R)return!0}}}},methods:{async createLesson(){if(null==this.startDateInput||null==this.startTimeInput||null==this.durationInput)return void alert("Please make sure all fields filled in!");this.lessonInfo.teacherId=this.currentUser.id,this.lessonInfo.startDateTime=B["DateTime"].fromJSDate(this.startDateInput).toISODate()+" "+this.startTimeInput.HH+":"+this.startTimeInput.mm+":00",this.lessonInfo.startDateTime=B["DateTime"].fromSQL(this.lessonInfo.startDateTime).toSeconds(),this.lessonInfo.duration="PT"+this.durationInput.mm.toString()+"M",null!=this.endDateInput&&(this.lessonInfo.endDateTime=B["DateTime"].fromJSDate(this.endDateInput).toSeconds()),console.log("Create Lesson Form Output:",this.lessonInfo);let e=await this.$store.dispatch("createLesson",this.lessonInfo);e.error?alert(e.error):alert("Lesson Created Successfully!")}},mounted(){this.$store.dispatch("loadUsers")}},j=N,F=(s("1399"),Object(y["a"])(j,$,M,!1,null,null,null)),A=F.exports,q=s("f5ff"),H=s("3e32"),J=s("a20c"),V={name:"TeacherHomepage",computed:{...Object(i["b"])(["currentUser","teachersLessons","bookings"])},data(){return{calendarOptions:{plugins:[H["a"],J["a"]],initialView:"timeGridWeek",height:"100%",allDaySlot:!1,nowIndicator:!0,scrollTime:"09:00:00",eventClick:this.eventSelected,titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:!1},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"}},bookingModalInfo:{studentName:null,startTime:null,endTime:null,bookingId:null,lessonId:null,cancelled:!1},lessonModalInfo:{startTime:null,endTime:null,lessonId:null},cancelledBookings:[]}},methods:{showCreateLessonForm(){this.$modal.show("createLessonFormModal")},hideCreateLessonForm(){this.$modal.hide("createLessonFormModal"),console.log("Hide Create Lesson Form"),this.updateCalendar()},showBookingInfo(){this.$modal.show("bookingInfoModal")},hideBookingInfo(){this.$modal.hide("bookingInfoModal")},showLessonInfo(){this.$modal.show("lessonInfoModal")},hideLessonInfo(){this.$modal.hide("lessonInfoModal")},eventSelected(e){console.log("Event Selected",e),"Available Lesson"==e.event._def.title||e.event._def.extendedProps.cancelled?"Available Lesson"!=e.event._def.title&&e.event._def.extendedProps.cancelled?(this.bookingModalInfo.studentName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.lessonId=e.event._def.extendedProps.lessonId,this.bookingModalInfo.cancelled=!0,this.showBookingInfo()):(this.lessonModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.lessonModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.lessonModalInfo.lessonId=e.event._def.publicId,this.showLessonInfo()):(this.bookingModalInfo.studentName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.bookingId=e.event._def.publicId,this.bookingModalInfo.lessonId=e.event._def.extendedProps.lessonId,this.showBookingInfo())},async cancelBooking(){let e=this.bookingModalInfo.bookingId,t=await this.$store.dispatch("cancelBooking",e);t.error?alert(t.error):(alert("Cancellation Successfully Cancelled"),this.hideBookingInfo(),this.updateCalendar())},async deleteLessonSlotFromBooking(){if(confirm("This lesson slot has bookings on it. Are you sure you want to delete all occurences of this lesson?")){let e=await d().get("/bookings/lessonid/"+this.bookingModalInfo.lessonId),t=e.data;for(let r=0;r<t.length;r++)await d().delete("/bookings/"+t[r].id);let s=await this.$store.dispatch("deleteLesson",this.bookingModalInfo.lessonId);s.error?alert(s.error):(alert("Lesson Deleted Successfully"),this.updateCalendar())}},async deleteLessonSlot(){let e=await d().get("/bookings/lessonid/"+this.lessonModalInfo.lessonId),t=e.data;if(console.log("bookings:",t),0!=t.length){if(confirm("This lesson or another occurence of it has bookings on it. Are you sure you want to delete it?")){let e=await this.$store.dispatch("deleteLesson",this.lessonModalInfo.lessonId);e.error?alert(e.error):(alert("Lesson Deleted Successfully"),this.updateCalendar())}}else if(confirm("Are you sure you want to delete this lesson?")){let e=await this.$store.dispatch("deleteLesson",this.lessonModalInfo.lessonId);e.error?alert(e.error):(alert("Lesson Deleted Successfully"),this.updateCalendar())}},async fetchLessons(){let e={userId:this.currentUser.id,startDate:B["DateTime"].local().minus({years:.5}).toUTC().toISODate(),endDate:B["DateTime"].local().plus({years:.5}).toUTC().toISODate()};console.log(e),await this.$store.dispatch("loadTeachersLessons",e)},async updateCalendar(){await this.fetchLessons();let e=this.$refs["calendar"].getApi();e.getEventSourceById("teachersLessons").remove(),e.addEventSource({id:"teachersLessons",events:this.teachersLessons,color:"#52BE80",display:"block"})}},components:{CreateLesson:A,FullCalendar:q["a"]},async mounted(){await this.$store.dispatch("loadUsers"),await this.fetchLessons(),await this.$store.dispatch("loadTeachersBookings",this.currentUser.id);for(let t=0;t<this.bookings.length;t++)console.log,this.bookings[t].cancelled&&(this.cancelledBookings.push(this.bookings[t]),this.bookings.splice(t,1));let e=this.$refs["calendar"].getApi();e.addEventSource({id:"teachersLessons",events:this.teachersLessons,color:"#52BE80",display:"block"}),e.addEventSource({id:"bookings",events:this.bookings,color:"#E74C3C",display:"block"}),e.addEventSource({id:"cancelledBookings",events:this.cancelledBookings,color:"red"})}},G=V,W=(s("1e1a"),Object(y["a"])(G,O,U,!1,null,"7f89032c",null)),z=W.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("b-container",{staticClass:"mt-3",attrs:{id:"calendarDiv",fluid:""}},[t("full-calendar",{ref:"calendar",attrs:{options:e.calendarOptions}})],1),t("modal",{attrs:{name:"bookingInfoModal",width:500,height:400}},[t("div",{staticClass:"text-center"},[t("div",[e.bookingModalInfo.cancelled?t("h1",[e._v("Cancelled Booking")]):t("h1",[e._v("Booking")]),t("p",[e._v(e._s(e.bookingModalInfo.startTime)+" - "+e._s(e.bookingModalInfo.endTime))]),t("p",[e._v("Teacher: "+e._s(e.bookingModalInfo.teacherName))])]),e.bookingModalInfo.cancelled?t("div",[t("b-button",{attrs:{variant:"danger",disabled:""},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1):t("div",[t("b-button",{attrs:{variant:"danger"},on:{click:e.cancelBooking}},[e._v("Cancel Booking")])],1),t("b-button",{attrs:{variant:"outline-danger"},on:{click:e.hideBookingInfo}},[e._v("Close")])],1)])],1)},Z=[],Q={name:"StudentHomepage",computed:{...Object(i["b"])(["currentUser","bookings"])},data(){return{calendarOptions:{plugins:[H["a"],J["a"]],initialView:"timeGridWeek",eventClick:this.eventSelected,height:"100%",allDaySlot:!1,nowIndicator:!0,scrollTime:"09:00:00",titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:!1},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"}},bookingModalInfo:{teacherName:null,startTime:null,endTime:null,bookingId:null,cancelled:!1},cancelledBookings:[]}},methods:{showBookingInfo(){this.$modal.show("bookingInfoModal")},hideBookingInfo(){this.$modal.hide("bookingInfoModal")},async cancelBooking(){let e=this.bookingModalInfo.bookingId,t=await this.$store.dispatch("cancelBooking",e);t.error?alert(t.error):(alert("Cancellation Successfully Cancelled"),this.hideBookingInfo(),this.updateCalendar())},eventSelected(e){e.event._def.extendedProps.cancelled?(this.bookingModalInfo.teacherName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.cancelled=!0,this.showBookingInfo()):(this.bookingModalInfo.teacherName=e.event._def.title,this.bookingModalInfo.startTime=B["DateTime"].fromJSDate(e.event._instance.range.start).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.endTime=B["DateTime"].fromJSDate(e.event._instance.range.end).toLocaleString(B["DateTime"].TIME_SIMPLE),this.bookingModalInfo.bookingId=e.event._def.publicId,this.showBookingInfo())},async updateCalendar(){await this.$store.dispatch("loadStudentsBookings",this.currentUser.id);for(let t=0;t<this.bookings.length;t++)this.bookings[t].cancelled&&(this.cancelledBookings.push(this.bookings[t]),this.bookings.splice(t,1));let e=this.$refs["calendar"].getApi();e.getEventSourceById("studentBookings").remove(),e.getEventSourceById("studentCancelled").remove(),e.addEventSource({id:"studentBookings",events:this.bookings,color:"#E74C3C",display:"block"}),e.addEventSource({id:"studentCancelled",events:this.cancelledBookings,color:"red"})}},components:{FullCalendar:q["a"]},async mounted(){this.$store.dispatch("loadUsers"),await this.$store.dispatch("loadStudentsBookings",this.currentUser.id);for(let t=0;t<this.bookings.length;t++)this.bookings[t].cancelled&&(this.cancelledBookings.push(this.bookings[t]),this.bookings.splice(t,1));let e=this.$refs["calendar"].getApi();e.addEventSource({id:"studentBookings",events:this.bookings,color:"#E74C3C",display:"block"}),e.addEventSource({id:"studentCancelled",events:this.cancelledBookings,color:"red"})}},X=Q,Y=(s("efad"),Object(y["a"])(X,K,Z,!1,null,"924b4e5c",null)),ee=Y.exports,te={name:"Homepage",computed:{...Object(i["b"])(["currentUser"])},async mounted(){await this.$store.dispatch("loadUsers"),console.log(this.currentUser)},components:{TeacherHomepage:z,StudentHomepage:ee}},se=te,re=Object(y["a"])(se,P,D,!1,null,"6d3edcc3",null),oe=re.exports,ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center",attrs:{id:"loginPage"}},[t("form",{staticClass:"form-signin"},[t("h1",{staticClass:"my-5"},[e._v("Login")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.email,expression:"loginInfo.email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Email",id:"emailInput"},domProps:{value:e.loginInfo.email},on:{input:function(t){t.target.composing||e.$set(e.loginInfo,"email",t.target.value)}}}),t("div",{staticClass:"input-group mt-3"},["checkbox"===(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"checkbox"},domProps:{checked:Array.isArray(e.loginInfo.password)?e._i(e.loginInfo.password,null)>-1:e.loginInfo.password},on:{change:function(t){var s=e.loginInfo.password,r=t.target,o=!!r.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);r.checked?n<0&&e.$set(e.loginInfo,"password",s.concat([a])):n>-1&&e.$set(e.loginInfo,"password",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.loginInfo,"password",o)}}}):"radio"===(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"radio"},domProps:{checked:e._q(e.loginInfo.password,null)},on:{change:function(t){return e.$set(e.loginInfo,"password",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfo.password,expression:"loginInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:e.showPassword?"text":"password"},domProps:{value:e.loginInfo.password},on:{input:function(t){t.target.composing||e.$set(e.loginInfo,"password",t.target.value)}}}),t("div",{staticClass:"input-group-append"},[t("b-button",{attrs:{variant:"outline-primary",type:"button"},on:{click:function(t){e.showPassword=!e.showPassword}}},[t("b-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1)],1)]),t("button",{staticClass:"btn btn-primary mt-5",attrs:{type:"button"},on:{click:e.loginUser}},[e._v("Submit")])])])},ne=[],ie={name:"LoginForm",data(){return{showPassword:!1,loginInfo:{email:"",password:""}}},methods:{async loginUser(){let e=await this.$store.dispatch("loginUser",this.loginInfo);e.error?alert(e.error):this.$router.push({name:"homepage"})}}},le=ie,ce=(s("a021"),Object(y["a"])(le,ae,ne,!1,null,"cadd60bc",null)),de=ce.exports,ue=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register text-center"},[t("h1",{staticClass:"my-5"},[e._v("Register")]),t("div"),t("h3",{staticClass:"my-2"},[e._v("I am a...")]),t("button",{staticClass:"btn btn-outline-primary mx-3",on:{click:e.registerStudentRedirect}},[e._v("Student")]),t("button",{staticClass:"btn btn-outline-primary mx-3",on:{click:e.registerTeacherRedirect}},[e._v("Teacher")])])},me=[],pe={name:"RegisterForm",methods:{registerStudentRedirect(){this.$router.push({name:"registerFormStudent"})},registerTeacherRedirect(){this.$router.push({name:"registerFormTeacher"})}}},he=pe,ge=(s("9f6c"),Object(y["a"])(he,ue,me,!1,null,"5d997748",null)),fe=ge.exports,ve=function(){var e=this,t=e._self._c;return t("div",[t("ValidationObserver",{staticClass:"form-register text-center",attrs:{id:"registerPage"},scopedSlots:e._u([{key:"default",fn:function({invalid:s}){return[t("form",{staticClass:"form-register"},[t("h1",{staticClass:"mb-5"},[e._v("Student Register")]),t("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("First Name")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.fname,expression:"registerInfo.fname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"First Name",id:"fnameInput"},domProps:{value:e.registerInfo.fname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"fname",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Last Name")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.lname,expression:"registerInfo.lname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name",id:"lnameInput"},domProps:{value:e.registerInfo.lname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"lname",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|email|max:50"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Email")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.email,expression:"registerInfo.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email",id:"emailInput"},domProps:{value:e.registerInfo.email},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"email",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|min:8|max:50|password"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Password")])]),"checkbox"===(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"checkbox"},domProps:{checked:Array.isArray(e.registerInfo.password)?e._i(e.registerInfo.password,null)>-1:e.registerInfo.password},on:{change:function(t){var s=e.registerInfo.password,r=t.target,o=!!r.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);r.checked?n<0&&e.$set(e.registerInfo,"password",s.concat([a])):n>-1&&e.$set(e.registerInfo,"password",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.registerInfo,"password",o)}}}):"radio"===(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"radio"},domProps:{checked:e._q(e.registerInfo.password,null)},on:{change:function(t){return e.$set(e.registerInfo,"password",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:e.showPassword?"text":"password"},domProps:{value:e.registerInfo.password},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"password",t.target.value)}}}),t("div",{staticClass:"input-group-append"},[t("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){e.showPassword=!e.showPassword}}},[t("b-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1)],1)]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("div",{staticClass:"mt-5"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:s},on:{click:e.registerUser}},[e._v("Submit")])])],1)]}}])})],1)},be=[],Ie=s("7bb1"),_e=s("4c93"),we=s("2593"),ke=s("1157");Object(Ie["c"])("required",_e["d"]),Object(Ie["c"])("email",_e["a"]),Object(Ie["c"])("min",_e["c"]),Object(Ie["c"])("max",_e["b"]),Object(Ie["c"])("password",e=>{let t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,50}$/;return e.match(t)}),Object(Ie["d"])({en:{messages:we.messages,names:{fnameInput:"First Name",lnameInput:"Last Name",emailInput:"E-mail Address",passwordInput:"Password"},fields:{fnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},lnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},emailInput:{required:"{_field_} is required",email:"{_field_} is invalid",max:"{_field_} must be less than 50 characters long"},passwordInput:{required:"{_field_} is required",min:"{_field_} must be at least 8 characters long",max:"{_field_} must be less than 50 characters long",password:"{_field_} invalid. Must contain an upper case, lower case, number and symbol."}}}});var ye={name:"registerFormStudent",computed:{...i["b"]["currentUser"]},data(){return{showPassword:!1,registerInfo:{fname:"",lname:"",email:"",password:"",isTeacher:0,hourly:null}}},methods:{async registerUser(){let e=await this.$store.dispatch("registerUser",this.registerInfo);e.error?alert(e.error):(alert("Welcome",e.fname),console.log("Student Registered!"),this.$router.push({name:"homepage"}))}},mounted(){this.$store.dispatch("loadUsers"),Object(ke["isEmptyObject"])(this.currentUser)||this.$router.push({name:"homepage"})},components:{ValidationObserver:Ie["a"],ValidationProvider:Ie["b"]}},Ce=ye,Se=(s("832a"),Object(y["a"])(Ce,ve,be,!1,null,"bd530422",null)),Te=Se.exports,Ee=function(){var e=this,t=e._self._c;return t("div",[t("ValidationObserver",{staticClass:"form-register text-center",attrs:{id:"registerPage"},scopedSlots:e._u([{key:"default",fn:function({invalid:s}){return[t("form",{staticClass:"form-register"},[t("h1",{staticClass:"mb-5"},[e._v("Teacher Register")]),t("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("First Name")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.fname,expression:"registerInfo.fname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"First Name",id:"fnameInput"},domProps:{value:e.registerInfo.fname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"fname",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|max:50"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Last Name")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.lname,expression:"registerInfo.lname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name",id:"lnameInput"},domProps:{value:e.registerInfo.lname},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"lname",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|email|max:50"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Email")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.email,expression:"registerInfo.email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email",id:"emailInput"},domProps:{value:e.registerInfo.email},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"email",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required|min:8|max:50|password"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Password")])]),"checkbox"===(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"checkbox"},domProps:{checked:Array.isArray(e.registerInfo.password)?e._i(e.registerInfo.password,null)>-1:e.registerInfo.password},on:{change:function(t){var s=e.registerInfo.password,r=t.target,o=!!r.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);r.checked?n<0&&e.$set(e.registerInfo,"password",s.concat([a])):n>-1&&e.$set(e.registerInfo,"password",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.registerInfo,"password",o)}}}):"radio"===(e.showPassword?"text":"password")?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:"radio"},domProps:{checked:e._q(e.registerInfo.password,null)},on:{change:function(t){return e.$set(e.registerInfo,"password",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.password,expression:"registerInfo.password"}],staticClass:"form-control",attrs:{placeholder:"Password",id:"passwordInput",type:e.showPassword?"text":"password"},domProps:{value:e.registerInfo.password},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"password",t.target.value)}}}),t("div",{staticClass:"input-group-append"},[t("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){e.showPassword=!e.showPassword}}},[t("b-icon",{attrs:{icon:e.showPassword?"eye":"eye-slash"}})],1)],1)]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("div",{staticClass:"input-group pt-3"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Hourly Rate")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfo.hourly,expression:"registerInfo.hourly"}],staticClass:"form-control",attrs:{type:"number",id:"hourlyInput",min:"0",max:"999"},domProps:{value:e.registerInfo.hourly},on:{input:function(t){t.target.composing||e.$set(e.registerInfo,"hourly",t.target.value)}}})]),t("span",{staticClass:"error"},[e._v(e._s(s[0]))])]}}],null,!0)}),t("div",{staticClass:"mt-5"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:s},on:{click:e.registerUser}},[e._v("Submit")])])],1)]}}])})],1)},xe=[];Object(Ie["c"])("required",_e["d"]),Object(Ie["c"])("email",_e["a"]),Object(Ie["c"])("min",_e["c"]),Object(Ie["c"])("max",_e["b"]),Object(Ie["c"])("password",e=>{let t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,50}$/;return e.match(t)}),Object(Ie["d"])({en:{messages:we.messages,names:{fnameInput:"First Name",lnameInput:"Last Name",emailInput:"E-mail Address",passwordInput:"Password",hourlyInput:"Hourly Rate"},fields:{fnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},lnameInput:{required:"{_field_} is required",max:"{_field_} must be less than 50 characters long"},emailInput:{required:"{_field_} is required",email:"{_field_} is invalid",max:"{_field_} must be less than 50 characters long"},passwordInput:{required:"{_field_} is required",min:"{_field_} must be at least 8 characters long",max:"{_field_} must be less than 50 characters long",password:"{_field_} invalid. Must contain an upper case, lower case, number and symbol."},hourlyInput:{required:"{_field_} is required"}}}});var Le={name:"registerFormTeacher",computed:{...i["b"]["currentUser"]},data(){return{showPassword:!1,registerInfo:{fname:"",lname:"",email:"",password:"",isTeacher:1,hourly:null}}},methods:{async registerUser(){let e=await this.$store.dispatch("registerUser",this.registerInfo);console.log("User:",e),console.log("User Error",e.error),e.error?alert(e.error):(alert("Welcome",e.fname),console.log("Teacher Registered!"),this.$router.push({name:"homepage"}))}},mounted(){this.$store.dispatch("loadUsers"),Object(ke["isEmptyObject"])(this.currentUser)||this.$router.push({name:"homepage"})},components:{ValidationObserver:Ie["a"],ValidationProvider:Ie["b"]}},Pe=Le,De=(s("2358"),Object(y["a"])(Pe,Ee,xe,!1,null,"46c5ccf4",null)),Oe=De.exports,Ue=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"mt-5",attrs:{id:"teacherSearch"}},[t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Search Teachers")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput.input,expression:"searchInput.input"}],attrs:{type:"text",placeholder:"Enter A Name"},domProps:{value:e.searchInput.input},on:{input:[function(t){t.target.composing||e.$set(e.searchInput,"input",t.target.value)},e.searchForTeachers]}})]),t("div",[e._l(e.teachers,(function(s){return t("div",{key:s.id,staticClass:"mt-1"},[e._v(" "+e._s(s.fname)+" "),t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.showTeacherInfo(s)}}},[e._v("Info")])])})),t("modal",{attrs:{name:"teacherInfoModal",width:500,height:300}},[t("div",{staticClass:"text-center"},[t("div",[t("h1",{staticClass:"mt-4"},[e._v(e._s(e.teacherInfo.fname))]),t("p",{staticClass:"mt-2"},[e._v("Email: "+e._s(e.teacherInfo.email))]),t("p",{staticClass:"mt-2"},[e._v("Hourly Rate: £"+e._s(e.teacherInfo.hourly))])]),t("div",[t("button",{staticClass:"btn btn-success mt-2",on:{click:e.teacherBookingPageRedirect}},[e._v("Book A Lesson")])]),t("button",{staticClass:"btn btn-outline-danger mt-4",on:{click:e.hideTeacherInfo}},[e._v("Close")])])])],2)])},$e=[],Me={name:"bookingPage",computed:{...Object(i["b"])(["currentUser","teachers"])},data(){return{searchInput:{input:""},teacherInfo:{}}},methods:{searchForTeachers(){this.$store.commit("CLEAR_TEACHERS"),this.$store.dispatch("searchForTeachers",this.searchInput)},showTeacherInfo(e){this.teacherInfo=e,this.$modal.show("teacherInfoModal")},hideTeacherInfo(){this.$modal.hide("teacherInfoModal")},teacherBookingPageRedirect(){let e=this.teacherInfo.id;this.$router.push({name:"lessonBooking",params:{teacherId:e}})}},async mounted(){this.$store.dispatch("loadUsers")}},Be=Me,Re=(s("6f3c"),Object(y["a"])(Be,Ue,$e,!1,null,"21a131c4",null)),Ne=Re.exports,je=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Lesson Booking")]),t("full-calendar",{ref:"calendar",attrs:{options:e.calendarOptions},on:{refreshCalendar:e.fetchLessons}})],1)},Fe=[],Ae={name:"lessonBooking",props:["teacherId"],computed:{...Object(i["b"])(["currentUser","teachersLessons","bookings"])},async mounted(){this.$store.dispatch("loadUsers"),await this.fetchLessons();let e=this.$refs["calendar"].getApi();e.addEventSource(this.teachersLessons)},data(){return{calendarOptions:{plugins:[H["a"],J["a"]],initialView:"timeGridWeek",height:620,allDaySlot:!1,nowIndicator:!0,scrollTime:"09:00:00",eventClick:this.lessonSlotClick,titleFormat:{year:"numeric",month:"long"},dayHeaderFormat:{weekday:"short",day:"numeric"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:!1},slotLabelFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"}},selectedLessonSlot:{startDate:null,endDate:null,lessonId:null}}},methods:{async fetchLessons(){let e={userId:this.teacherId,startDate:B["DateTime"].local().toUTC().toISODate(),endDate:B["DateTime"].local().plus({years:2}).toUTC().toISODate()};await this.$store.dispatch("loadTeachersLessons",e)},lessonSlotClick(e){if(this.selectedLessonSlot.startDate=B["DateTime"].fromJSDate(e.event._instance.range.start).toUTC().toFormat("yyyy-MM-dd HH:mm:ss"),this.selectedLessonSlot.lessonId=e.event._def.publicId,confirm("Are you sure you want to book this lesson?")){let e={studentId:this.currentUser.id,lessonId:this.selectedLessonSlot.lessonId,dateTime:this.selectedLessonSlot.startDate,cancelled:0};this.$store.dispatch("createBooking",e),this.$router.push({name:"homepage"})}}},components:{FullCalendar:q["a"]}},qe=Ae,He=Object(y["a"])(qe,je,Fe,!1,null,null,null),Je=He.exports,Ve=function(){var e=this,t=e._self._c;return t("b-container",[t("div",{staticClass:"input-group mt-5"},[t("div",{staticClass:"input-group-prepend"},[t("span",{staticClass:"input-group-text"},[e._v("Search Students")])]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput.input,expression:"searchInput.input"}],attrs:{type:"text",placeholder:"Enter A Name"},domProps:{value:e.searchInput.input},on:{input:[function(t){t.target.composing||e.$set(e.searchInput,"input",t.target.value)},e.searchForStudents]}})]),t("div",[e._l(e.students,(function(s){return t("div",{key:s.id,staticClass:"mt-2"},[e._v(" "+e._s(s.fname)+" "),t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.showStudentInfo(s)}}},[e._v("Info")])])})),t("modal",{attrs:{name:"studentInfoModal",width:500,height:400}},[t("div",{staticClass:"text-center"},[t("div",[t("h1",{staticClass:"mt-5"},[e._v(e._s(e.studentInfo.fname))]),t("h1",{staticClass:"mt-1"},[e._v(e._s(e.studentInfo.lname))]),t("p",{staticClass:"mt-4"},[e._v("Email: "+e._s(e.studentInfo.email))])]),t("button",{staticClass:"btn btn-outline-danger mt-5",on:{click:e.hideStudentInfo}},[e._v("Close")])])])],2)])},Ge=[],We={name:"studentSearch",computed:{...Object(i["b"])(["currentUser","students"])},data(){return{searchInput:{input:"",teacherId:null},studentInfo:{}}},methods:{searchForStudents(){this.searchInput.teacherId=this.currentUser.id,this.$store.commit("CLEAR_STUDENTS"),this.$store.dispatch("searchForStudents",this.searchInput)},showStudentInfo(e){this.studentInfo=e,this.$modal.show("studentInfoModal")},hideStudentInfo(){this.$modal.hide("studentInfoModal")}},mounted(){this.$store.dispatch("loadUsers")}},ze=We,Ke=Object(y["a"])(ze,Ve,Ge,!1,null,"751022ac",null),Ze=Ke.exports,Qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e._m(0),t("div",{staticClass:"text-center my-5"},[t("router-link",{attrs:{to:"/register"}},[t("button",{staticClass:"btn btn-outline-primary"},[e._v("Sign up")])])],1),t("div",{staticClass:"text-center my-5"},[t("router-link",{attrs:{to:"/login"}},[t("button",{staticClass:"btn btn-outline-primary"},[e._v("Login")])])],1)])},Xe=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center my-5"},[t("h1",[e._v("Music Lesson Scheduling Tool")])])}],Ye={name:"LandingPage",computed:{...Object(i["b"])(["currentUser"])},mounted(){this.$store.dispatch("loadUsers")}},et=Ye,tt=Object(y["a"])(et,Qe,Xe,!1,null,null,null),st=tt.exports,rt=function(){var e=this;e._self._c;return e._m(0)},ot=[function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("Error 404. Page Not Found")])])}],at={name:"Error404",computed:{...Object(i["b"])(["currentUser"])},mounted(){this.$store.dispatch("loadUsers")}},nt=at,it=Object(y["a"])(nt,rt,ot,!1,null,null,null),lt=it.exports;const ct=(e,t,s)=>{Object(ke["isEmptyObject"])(u.state.currentUser)?s({name:"landingPage"}):s()},dt=(e,t,s)=>{Object(ke["isEmptyObject"])(u.state.currentUser)||u.state.currentUser.isTeacher?s({name:"homepage"}):s()},ut=(e,t,s)=>{!Object(ke["isEmptyObject"])(u.state.currentUser)&&u.state.currentUser.isTeacher?s():s({name:"homepage"})},mt=async(e,t,s)=>{await u.dispatch("loadUsers"),Object(ke["isEmptyObject"])(u.state.currentUser)?s():s({name:"homepage"})};r["default"].component("Datepicker",m["a"]),r["default"].component("Timepicker",h.a),r["default"].use(f.a),r["default"].use(a["a"]),r["default"].use(n["a"]),r["default"].config.productionTip=!1,r["default"].use(o["a"]);const pt=new o["a"]({routes:[{path:"/",component:st,name:"landingPage",beforeEnter:mt},{path:"/home",component:oe,name:"homepage",beforeEnter:ct},{path:"/login",component:de,name:"loginForm",beforeEnter:mt},{path:"/register",component:fe,name:"registerForm",beforeEnter:mt},{path:"/registerStudent",component:Te,name:"registerFormStudent",beforeEnter:mt},{path:"/registerTeacher",component:Oe,name:"registerFormTeacher",beforeEnter:mt},{path:"/booking",component:Ne,name:"bookingPage",beforeEnter:dt},{path:"/lesson/booking/:teacherId",component:Je,name:"lessonBooking",props:!0,beforeEnter:dt},{path:"/students",component:Ze,name:"studentSearch",beforeEnter:ut},{path:"/*",component:lt,name:"404"}]});new r["default"]({router:pt,store:u,render:e=>e(L)}).$mount("#app")},"6f3c":function(e,t,s){"use strict";s("0712")},7009:function(e,t,s){"use strict";s("1e10")},"832a":function(e,t,s){"use strict";s("a4b5")},"88ac":function(e,t,s){},"9f6c":function(e,t,s){"use strict";s("2e6d")},a021:function(e,t,s){"use strict";s("2cf4")},a4b5:function(e,t,s){},d899:function(e,t,s){},efad:function(e,t,s){"use strict";s("2d05")},f167:function(e,t,s){"use strict";s("d899")}});
//# sourceMappingURL=app.6fbb01ff.js.map